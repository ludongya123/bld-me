{"version":3,"sources":["webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?b95c","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?5c5d","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?3921","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?3ab7","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?3b6a","webpack:///G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue?cfe5"],"names":["data","sid","fid","textarea","typeIcon","iconArr","icon","activeIcon","index","imgHost","img","storeFlag","storeList","shopDetail","share","components","YYPickStore","onLoad","opts","console","log","sss_id","getSuggestDetail","getShopDetail","onShow","$hasToken","then","res","onShareAppMessage","title","path","computed","watch","getIsLocation","v","methods","backPage","setIndexStoreId","uni","switchTab","url","navigateBack","feedback_id","code","result","type","content","images","store_id","imgArr","split","length","i","push","id","distance","toFixed","getStoreList","page_no","page_size","list","cities","j","stores","checkStore","chooseImg","that","chooseImage","count","success","imgs","tempFilePaths","showLoading","mask","bussiness_type","hideLoading","ossObj","host","setTimeout","uploadImg","imgsrc","obj","lastIndexOf","imgExtension","substring","imgPath","dir","Date","getTime","uploadFile","filePath","name","formData","OSSAccessKeyId","access_id","policy","signature","key","success_action_status","complete","statusCode","submit","getStorageSync","showModal","confirmColor","confirm","navigateTo","showToast","user_feedback","feedback_type","store_name","join","redirectTo","wx","chooseIcon","delImg","splice"],"mappings":"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","file":"pages/user/submit-suggest/submit-suggest.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { suggestDetail, shopDetail ,subSuggest,oss} from \"../../../api/user.js\"\nimport { storeList  } from '../../../api/home/index.js'\nimport YYPickStore from '../../../components/home/baoyang/yuyuePickStore.vue'\nimport {mapGetters,mapMutations} from \"vuex\"\nexport default {\n\tdata(){\n\t\treturn {\n\t\t\tsid:'',// 门店id\n\t\t\tfid:'', // 反馈意见的id\n\t\t\ttextarea:'', // 反馈内容\n\t\t\ttypeIcon:'', // 反馈类型\n\t\t\ticonArr:[\n\t\t\t\t{icon:'ts',activeIcon:'ts1',index:1},\n\t\t\t\t{icon:'tcc',activeIcon:'tcc1',index:2},\n\t\t\t\t{icon:'fk',activeIcon:'fk1',index:3},\n\t\t\t\t{icon:'qt',activeIcon:'qt1',index:4}\n\t\t\t],\n\t\t\timgHost:'',\n\t\t\timg:[],\n\t\t\tstoreFlag:false,\n\t\t\tstoreList:[],\n\t\t\tshopDetail:{},\n\t\t\tshare:0\n\t\t}\n\t},\n\tcomponents:{\n\t\tYYPickStore \n\t},\n\tonLoad(opts) {\n\t\tconsole.log(opts)\n\t\tthis.fid = opts.fid ||''\n\t\tthis.sid = opts.sss_id ||''\n\t\tthis.share = opts.share || '0'\n\t\tthis.getSuggestDetail()\n\t\tthis.getShopDetail() \n\t},\n\tonShow() {\n\t\tthis.$hasToken().then(res=>{ \n\t\t\tthis.getShopDetail() \n\t\t})\n\t},\n\tonShareAppMessage(res) {\n\t\treturn {\n\t\t  title: '意见反馈',\n\t\t  path: '/pages/user/submit-suggest/submit-suggest?sss_id='+this.sid+'&share=1'\n\t\t}\n\t},\n\tcomputed:{\n\t\t...mapGetters(['getIsLocation'])\n\t},\n\twatch:{\n\t\tgetIsLocation(v){\n\t\t\tif(v) {\n\t\t\t\tthis.$hasToken().then(res=>{ \n\t\t\t\t\tthis.getShopDetail() \n\t\t\t\t}) \n\t\t\t}\n\t\t}\n\t},\n\tmethods:{\n\t\t...mapMutations(['setIndexStoreId']),\n\t\tbackPage(){ \n\t\t\tif(this.share == 1) {\n\t\t\t\tthis.setIndexStoreId(this.sid)\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl:'/pages/home/home'\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t// 获取反馈的详情\n\t\tgetSuggestDetail(){\n\t\t\tif(this.fid == '') return\n\t\t\tsuggestDetail({\n\t\t\t\tdata:{\n\t\t\t\t\tfeedback_id:this.fid\n\t\t\t\t}\n\t\t\t}).then(res=>{\n\t\t\t\tif(res.data.code == 0) {\n\t\t\t\t\tlet {type,content,images,store_id} = res.data.result\n\t\t\t\t\tthis.sid = store_id\n\t\t\t\t\tthis.typeIcon = type\n\t\t\t\t\tthis.textarea = content\n\t\t\t\t\tlet imgArr = images!='' && images ? images.split(','):[]\n\t\t\t\t\tif(imgArr.length != 0) {\n\t\t\t\t\t\tthis.imgHost = imgArr[0].split('/')[0] + '//'+imgArr[0].split('/')[2]\n\t\t\t\t\t\tfor(let i in imgArr) {\n\t\t\t\t\t\t\tthis.img.push(`/${imgArr[i].split('/')[3]}/${imgArr[i].split('/')[4]}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\tthis.getShopDetail(store_id)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取店面详情\n\t\tgetShopDetail(id){\n\t\t\tif(this.sid == '') return \n\t\t\tshopDetail({\n\t\t\t\tdata:{\n\t\t\t\t\tid:this.sid\n\t\t\t\t}\n\t\t\t}).then(res=>{\n\t\t\t\tif(res.data.code == 0) {\n\t\t\t\t\tres.data.result.distance = res.data.result.distance > 0 ? (res.data.result.distance / 1000).toFixed(2) : ''\n\t\t\t\t\tthis.shopDetail = res.data.result\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取4s点列表\n\t\tgetStoreList() {\n\t\t\tif(this.fid != '') return\n\t\t\tif (this.storeList.length != 0) {\n\t\t\t\tthis.storeFlag = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.storeFlag = true;\n\t\t\tstoreList({\n\t\t\t\tdata: {\n\t\t\t\t\tpage_no: '1',\n\t\t\t\t\tpage_size: '1000'\n\t\t\t\t}\n\t\t\t}).then(res => { \n\t\t\t\tif (res.data.code == 0) {\n\t\t\t\t\tlet list = res.data.result.cities\n\t\t\t\t\tfor(let i in list) {\n\t\t\t\t\t\tfor (let j in list[i].stores){\n\t\t\t\t\t\t\tlist[i].stores[j].distance = list[i].stores[j].distance > 0 ? (list[i].stores[j].distance / 1000).toFixed(2) : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.storeList = list;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 选择4s店\n\t\tcheckStore(data=null){\n\t\t\tthis.storeFlag = false\n\t\t\tif(data != 'close') {\n\t\t\t\tthis.shopDetail = data\n\t\t\t\tthis.sid = data.id \n\t\t\t} \n\t\t},\n\t\tchooseImg(){\n\t\t\tlet that = this\n\n\t\t\tuni.chooseImage({\n\t\t\t\tcount:5 - this.img.length, \n\t\t\t\tsuccess(data){ \n\t\t\t\t\tlet imgs = data.tempFilePaths\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle:'上传中...',\n\t\t\t\t\t\tmask:true\n\t\t\t\t\t})\n\t\t\t\t\toss({\n\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\tbussiness_type:'suggestion'\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tif(res.data.code == 0) { \n\t\t\t\t\t\t\tlet ossObj = res.data.result\n\t\t\t\t\t\t\tthat.imgHost = ossObj.host\n\t\t\t\t\t\t\tfor(let i in imgs){\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tthat.uploadImg(imgs[i],ossObj)\n\t\t\t\t\t\t\t\t},20) \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tuploadImg(imgsrc,obj){\n\t\t\tconst index = imgsrc.lastIndexOf(\"\\.\");\n\t\t\tconst imgExtension = imgsrc.substring(index + 1, imgsrc.length);\n\t\t\tconst imgPath = `${obj.dir}${new Date().getTime()}.${imgExtension}`;\n\t\t\tlet that = this;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:\"上传中...\",\n\t\t\t\tmask:true\n\t\t\t})\n\t\t\tuni.uploadFile({\n\t\t\t\turl: obj.host, \n\t\t\t\tfilePath: imgsrc,\n\t\t\t\tname: 'file',\n\t\t\t\tformData: {\n\t\t\t\t\tOSSAccessKeyId:obj.access_id, \n\t\t\t\t\tpolicy:obj.policy,\n\t\t\t\t\tsignature:obj.signature,\n\t\t\t\t\tkey:imgPath,\n\t\t\t\t\tsuccess_action_status:200 \n\t\t\t\t}, \n\t\t\t\tcomplete(res) {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tif(res.statusCode == 200) {\n\t\t\t\t\t\t that.img.push('/'+imgPath)\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 提交 、、编辑\n\t\tsubmit(){ \n\t\t\tif(uni.getStorageSync('isMobile') != 1) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle:'提醒',\n\t\t\t\t\tcontent:'你还没有登录，请先登录',\n\t\t\t\t\tconfirmColor:\"#B49A83\",\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tif(res.confirm) {\n\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\turl:'/pages/login/login'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) \n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(this.typeIcon == '') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'请选择反馈类型',\n\t\t\t\t\ticon:'none'\n\t\t\t\t})\n\t\t\t\treturn \n\t\t\t}\n\t\t\tif(this.textarea == '') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'请输入反馈内容',\n\t\t\t\t\ticon:'none'\n\t\t\t\t})\n\t\t\t\treturn \n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:'提交中...',\n\t\t\t\tmask:true\n\t\t\t})\n\t\t\tsubSuggest({\n\t\t\t\tdata:{\n\t\t\t\t\tuser_feedback:this.textarea,\n\t\t\t\t\tfeedback_id:this.fid,\n\t\t\t\t\tfeedback_type:this.typeIcon,\n\t\t\t\t\tstore_id:this.sid,\n\t\t\t\t\tstore_name:this.shopDetail.name,\n\t\t\t\t\timages:this.img.join(',')\n\t\t\t\t}\n\t\t\t}).then(res=>{\n\t\t\t\tuni.hideLoading()\n\t\t\t\tif(res.data.code == 0) { \n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tif(this.fid == '') {\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl:`/pages/user/success-state/success-state?title=意见反馈`\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twx.redirectTo({\n\t\t\t\t\t\t\t  url: '/pages/user/my-suggest/my-suggest'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} \n\t\t\t\t\t},200)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tchooseIcon(i){\n\t\t\tif(i == this.typeIcon) return \n\t\t\tthis.typeIcon = i\n\t\t},\n\t\tdelImg(i){\n\t\t\tthis.img.splice(i,1)\n\t\t}\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./submit-suggest.vue?vue&type=template&id=0638dae0&\"\nimport script from \"./submit-suggest.vue?vue&type=script&lang=js&\"\nexport * from \"./submit-suggest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./submit-suggest.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0638dae0', component.options)\n    } else {\n      api.reload('0638dae0', component.options)\n    }\n    module.hot.accept(\"./submit-suggest.vue?vue&type=template&id=0638dae0&\", function () {\n      api.rerender('0638dae0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"G:/小程序/bld-me/pages/user/submit-suggest/submit-suggest.vue\"\nexport default component.exports","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./submit-suggest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./submit-suggest.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./submit-suggest.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./submit-suggest.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./submit-suggest.vue?vue&type=template&id=0638dae0&\""],"sourceRoot":""}